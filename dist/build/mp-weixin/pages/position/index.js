(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/position/index"],{"1c73":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(o("ce4d")),i=o("08c1"),a=s(o("ca00"));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(o,!0).forEach((function(t){c(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(o).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u=function(){return o.e("components/company-detail/company-detail").then(o.bind(null,"5ffe"))},p={components:{"company-detail":u},onShow:function(){wx.hideHomeButton()},onLoad:function(t){var o=this;this.positionId=t.positionId;var i=decodeURIComponent(t.scene);"undefined"!=i&&(this.visitType=i.split("-")[0],this.positionId=i.split("-")[1]),this.otherToken=t.token,this.recommendUserName=t.recommendUserName,this.recommendUserPosition=t.recommendUserPosition,this.recommendUserCompany=t.recommendUserCompany,t.visitType&&(this.visitType=t.visitType),e.request({url:n.default.host+"/tr/web/talentRecommend/positionInfo?"+n.default.code,method:"POST",data:{positionId:this.positionId},success:function(t){var i=t.data;0==i.code?(o.position=i.data,o.position.reward=Math.round(o.position.reward),o.position.salaryMin=Math.round(o.position.salaryMin/1e3),o.position.salaryMax=Math.round(o.position.salaryMax/1e3),o.salary=o.position.salaryMin+"k - "+o.position.salaryMax+"k",o.position.positionDescription=o.position.positionDescription.replace(/↵/g,"\n"),12==o.position.educationLevelId&&(o.position.educationLevelId=5),e.request({url:n.default.host+"/tr/web/talentRecommend/companyInfo?"+n.default.code,method:"POST",data:{companyId:o.position.companyId},success:function(e){var t=e.data;0==t.code?o.companyDetail=t.data.companyDescription.replace(/↵/g,"\n"):a.default.show(t.message)},fail:function(){a.default.show("获取公司信息失败")}})):a.default.show(i.message)},fail:function(){a.default.show("获取职位信息失败")}}),this.getCode()},computed:d({},(0,i.mapState)(["authorization","code","register","token","unionId","EXPERIENCE","EDUCATION"])),data:function(){return{positionId:0,position:null,type:0,otherToken:"",recommendUserName:"",recommendUserCompany:"",recommendUserPosition:"",visitType:0,companyDetail:"",salary:""}},methods:{getCode:function(){var e=this;wx.login({success:function(t){e.$store.commit("setCode",t.code)}})},getuserinfo:function(t){var o=this;t.detail.iv&&t.detail.encryptedData&&(e.showLoading({title:"登录中",mask:!0}),e.request({url:n.default.host+"/tr/web/talentRecommend/login?"+n.default.code,method:"POST",data:{code:this.code,iv:t.detail.iv,encryptedData:t.detail.encryptedData},success:function(t){console.log(t);var n=t.data;0==n.code?(o.$store.commit("setUnionId",n.data.unionId),e.setStorage({key:"unionIdRelation",data:{unionId:n.data.unionId}}),o.$store.commit("setAuthorization",!0),n.data.token&&(o.$store.commit("setToken",n.data.token),n.data.mobile&&(o.$store.commit("setRegister",!0),e.setStorage({key:"userInfoRelation",data:{token:o.token}}))),o.getCode()):a.default.show(n.message)},fail:function(){o.getCode(),console.log("error")},complete:function(){e.hideLoading()}}))},getphonenumber:function(t){var o=this;t.detail.encryptedData&&t.detail.iv&&(this.token?e.request({url:n.default.host+"/tr/web/talentRecommend/bindMobile?"+n.default.code,method:"POST",header:{Authorization:"Bearer "+this.token},data:{code:this.code,encryptedData:t.detail.encryptedData,iv:t.detail.iv},success:function(t){console.log(t);var n=t.data;0==n.code?(o.$store.commit("setRegister",!0),o.$store.commit("setToken",n.data.token),e.setStorage({key:"userInfoRelation",data:{token:o.token}}),1==o.type?o.jumpShare():2==o.type&&o.jumpRecommend()):a.default.show(n.message)},fail:function(){o.getCode()}}):e.request({url:n.default.host+"/tr/web/talentRecommend/register?"+n.default.code,method:"POST",data:{code:this.code,encryptedData:t.detail.encryptedData,iv:t.detail.iv,unionId:this.unionId},success:function(t){console.log(t);var n=t.data;0==n.code?(o.$store.commit("setRegister",!0),o.$store.commit("setToken",n.data.token),e.setStorage({key:"userInfoRelation",data:{token:o.token}}),1==o.type?o.jumpShare():2==o.type&&o.jumpRecommend()):a.default.show(n.message)},fail:function(){o.getCode()}}))},jumpShare:function(){e.navigateTo({url:"../share/index?positionId="+this.positionId+"&positionName="+this.position.positionName+"&token="+this.token+"&salary="+this.salary})},jumpRecommend:function(){e.navigateTo({url:"../uploadCv/recommender?positionId="+this.positionId})},jumpCompany:function(){e.navigateTo({url:"../company/index?companyId="+this.position.companyId+"&visitType="+this.visitType})},jumpUpload:function(){e.navigateTo({url:"../uploadCv/candidate?positionId="+this.positionId+"&token="+this.otherToken+"&recommendUserName="+this.recommendUserName+"&recommendUserCompany="+this.recommendUserCompany+"&recommendUserPosition="+this.recommendUserPosition})},onShareAppMessage:function(){return{title:"【"+this.position.companyName+"】悬赏招聘"+this.position.positionName+"，赏金"+this.position.reward+"元",path:"/pages/position/index?positionId="+this.positionId}},jumpPost:function(){e.navigateTo({url:"../post/index?positionId="+this.positionId+"&reward="+this.position.reward})}}};t.default=p}).call(this,o("aafe")["default"])},"35e6":function(e,t,o){"use strict";(function(e){o("6cdc"),o("ca78");n(o("31af"));var t=n(o("ba5d"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("aafe")["createPage"])},5982:function(e,t,o){"use strict";o.r(t);var n=o("1c73"),i=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=i.a},6247:function(e,t,o){"use strict";var n=o("e9d3"),i=o.n(n);i.a},"8acb":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.type=1},e.e1=function(t){e.type=2})},i=[];o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return i}))},ba5d:function(e,t,o){"use strict";o.r(t);var n=o("8acb"),i=o("5982");for(var a in i)"default"!==a&&function(e){o.d(t,e,(function(){return i[e]}))}(a);o("6247");var s=o("4e82"),r=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"60de0bc9",null);t["default"]=r.exports},e9d3:function(e,t,o){}},[["35e6","common/runtime","common/vendor"]]]);