(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/post/index"],{"0b18":function(e,t,n){"use strict";n.r(t);var o=n("f592"),a=n("586b");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("edf0");var s=n("4e82"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=r.exports},"14a5":function(e,t,n){},"586b":function(e,t,n){"use strict";n.r(t);var o=n("85d0"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"85d0":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("ce4d")),a=n("08c1"),i=s(n("ca00"));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={name:"canvas-drawer",computed:c({},(0,a.mapState)(["EXPERIENCE","EDUCATION"])),data:function(){return{position:null,positionId:"",companyId:"",companyName:"",val:"",cover:o.default.imageUrl,jobList:[],isGene:!1,reward:6e3,outWidth:0}},onLoad:function(t){var n=this;this.positionId=t.positionId,this.companyId=t.companyId,t.reward&&(this.reward=t.reward),this.positionId?e.request({url:o.default.host+"/tr/web/talentRecommend/positionInfo?"+o.default.code,method:"POST",data:{positionId:this.positionId},success:function(e){var t=e.data;0==t.code?(n.position=t.data,12==n.position.educationLevelId&&(n.position.educationLevelId=5),n.genPqrcode()):i.default.show(t.message)},fail:function(){i.default.show("获取职位信息失败")}}):(e.request({url:o.default.host+"/tr/web/talentRecommend/companyInfo?"+o.default.code,method:"POST",data:{companyId:this.companyId},success:function(e){var t=e.data;0==t.code?(n.companyName=t.data.companyName,n.genCqrcode()):i.default.show(t.message)},fail:function(){i.default.show("获取公司信息失败")}}),e.request({url:o.default.host+"/tr/web/talentRecommend/positionList?"+o.default.code,method:"POST",data:{companyId:this.companyId,page:1,pageSize:3},success:function(e){var t=e.data;0==t.code?n.jobList=t.data.list:i.default.show(t.message)},fail:function(){i.default.show("获取职位列表失败")}}))},methods:{qrRPosition:function(t){var n=this,o=(e.getSystemInfoSync(),e.createCanvasContext("firstCanvas"));e.showLoading({title:"海报生成中",mask:!0}),e.getImageInfo({src:n.cover,success:function(a){var i=wx.getSystemInfoSync().windowWidth,s=1.45*i<500?500:1.45*i;n.outerWidth=i,o.drawImage(a.path,0,0,i,s),o.font="25px SourceHanSansCN-Bold,SourceHanSansCN",o.setTextAlign("left"),o.fillText("悬赏推荐",25,.095*s),o.font="20px SourceHanSansCN-Bold,SourceHanSansCN",o.setTextAlign("left"),o.fillText("推荐入职奖励最高"+n.reward+"元",25,.17*s),o.font="25px SourceHanSansCN-Bold,SourceHanSansCN",o.setFillStyle("rgba(255, 255, 255, 1)"),o.setTextAlign("center"),o.fillText(n.position.positionName,i/2,.34*s),o.font="15px SourceHanSansCN-Bold,SourceHanSansCN",o.fillText(n.position.companyName,i/2,.4*s),o.fillText(n.EXPERIENCE[n.position.workYearId]+" | "+n.EDUCATION[n.position.educationLevelId]+" | "+n.position.cityName,i/2,.45*s),o.font="18px SourceHanSansCN-Bold,SourceHanSansCN",o.fillText(n.position.salaryMin/1e3+"-"+n.position.salaryMax/1e3+"k",i/2,.5*s),o.setFillStyle("rgba(42, 39, 31, 1))"),o.fillText("长按识别，了解详情",i/2,.86*s),o.arc(i/2,.67*s,e.upx2px(125),0,2*Math.PI),o.clip(),o.drawImage(t,i/2-e.upx2px(250)/2,.67*s-e.upx2px(125),e.upx2px(250),e.upx2px(250)),n.isGene=!0,o.draw(!1,(function(){}))},fail:function(e){console.log(e)},complete:function(){e.hideLoading()}})},qrRCompany:function(t){var n=this,o=(e.getSystemInfoSync(),e.createCanvasContext("firstCanvas"));e.showLoading({title:"海报生成中",mask:!0}),e.getImageInfo({src:n.cover,success:function(a){var i=wx.getSystemInfoSync().windowWidth,s=1.45*i<500?500:1.45*i;n.outerWidth=i,o.drawImage(a.path,0,0,i,s),o.font="25px SourceHanSansCN-Bold,SourceHanSansCN",o.setTextAlign("left"),o.fillText("悬赏推荐",25,.095*s),o.font="20px SourceHanSansCN-Bold,SourceHanSansCN",o.setTextAlign("left"),o.fillText("推荐入职，领取奖金",25,.17*s),o.font="25px SourceHanSansCN-Bold,SourceHanSansCN",o.setFillStyle("rgba(255, 255, 255, 1)"),o.setTextAlign("center"),o.fillText(n.companyName,i/2,.36*s),o.font="18px SourceHanSansCN-Bold,SourceHanSansCN";var r="",c=!0,l=!1,u=void 0;try{for(var d,f=n.jobList[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;r&&(r+=" · "),r+=p.positionName}}catch(m){l=!0,u=m}finally{try{c||null==f.return||f.return()}finally{if(l)throw u}}o.fillText(r,i/2,.44*s),o.setFillStyle("rgba(42, 39, 31, 1))"),o.fillText("长按识别，了解详情",i/2,.86*s),o.arc(i/2,.67*s,e.upx2px(125),0,2*Math.PI),o.clip(),o.drawImage(t,i/2-e.upx2px(250)/2,.67*s-e.upx2px(125),e.upx2px(250),e.upx2px(250)),n.isGene=!0,o.draw(!1,(function(){}))},fail:function(e){console.log(e)},complete:function(){e.hideLoading()}})},longPress:function(){var e=this;wx.showModal({content:"保存图片至相册？",success:function(t){t.confirm&&e.saveImg()}})},saveImg:function(){e.canvasToTempFilePath({x:0,y:0,width:this.outWidth,height:1.45*this.outWidth,destWidth:4*this.outWidth,destHeight:1.45*this.outWidth*4,canvasId:"firstCanvas",success:function(t){console.log(t),e.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(){e.navigateBack()}})},fail:function(t){console.log(t),e.showToast({title:"生成海报失败",icon:"none"})}})},close:function(){e.navigateBack()},genPqrcode:function(){var t=this;e.request({url:o.default.host+"/tr/web/talentRecommend/positionShare?"+o.default.code,method:"POST",data:{positionId:this.positionId},success:function(e){console.log(e);var n=e.data;if(0==n.code){var o="".concat(wx.env.USER_DATA_PATH,"/temp_image.jpeg"),a=wx.base64ToArrayBuffer(n.data.wechatAppCode),s=t;wx.getFileSystemManager().writeFile({filePath:o,data:a,encoding:"binary",success:function(){s.qrCode=o,s.qrRPosition(s.qrCode)},fail:function(){console.log("error base 64")}})}else i.default.show(n.message)},fail:function(){i.default.show("获取二维码失败")}})},genCqrcode:function(){var t=this;e.request({url:o.default.host+"/tr/web/talentRecommend/companyShare?"+o.default.code,method:"POST",data:{companyId:this.companyId},success:function(e){console.log(e);var n=e.data;if(0==n.code){var o="".concat(wx.env.USER_DATA_PATH,"/temp_image.jpeg"),a=wx.base64ToArrayBuffer(n.data.wechatAppCode),i=t;wx.getFileSystemManager().writeFile({filePath:o,data:a,encoding:"binary",success:function(){i.qrCode=o,i.qrRCompany(i.qrCode)},fail:function(){console.log("error base 64")}})}},fail:function(){console.log("error")}})},onShareAppMessage:function(){return{title:"推荐简历，兼职赚钱",path:"/pages/main/main"}}}};t.default=u}).call(this,n("aafe")["default"])},8884:function(e,t,n){"use strict";(function(e){n("6cdc"),n("ca78");o(n("31af"));var t=o(n("0b18"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("aafe")["createPage"])},edf0:function(e,t,n){"use strict";var o=n("14a5"),a=n.n(o);a.a},f592:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}))}},[["8884","common/runtime","common/vendor"]]]);